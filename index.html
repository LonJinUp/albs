<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport"
        content="width=device-width,initial-scale=1,maximum-scale=1,minimum-scale=1,user-scalable=no" />
    <!-- 是否启动webapp功能，会删除默认的苹果工具栏和菜单栏。 -->
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <!-- 这个主要是根据实际的页面设计的主体色为搭配来进行设置。 -->
    <meta name="apple-mobile-web-app-status-bar-style" content="black" />
    <!-- 忽略页面中的数字识别为电话号码,email识别 -->
    <meta name="format-detection" content="telephone=no, email=no" />
    <!-- 启用360浏览器的极速模式(webkit) -->
    <meta name="renderer" content="webkit">
    <!-- 避免IE使用兼容模式 -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <!-- 针对手持设备优化，主要是针对一些老的不识别viewport的浏览器，比如黑莓 -->
    <meta name="HandheldFriendly" content="true">
    <!-- 微软的老式浏览器 -->
    <meta name="MobileOptimized" content="320">
    <!-- uc强制竖屏 -->
    <meta name="screen-orientation" content="portrait">
    <!-- QQ强制竖屏 -->
    <meta name="x5-orientation" content="portrait">
    <!-- UC强制全屏 -->
    <meta name="full-screen" content="yes">
    <!-- QQ强制全屏 -->
    <meta name="x5-fullscreen" content="true">
    <!-- UC应用模式 -->
    <meta name="browsermode" content="application">
    <!-- QQ应用模式 -->
    <meta name="x5-page-mode" content="app">
    <!-- windows phone 点击无高光 -->
    <meta name="msapplication-tap-highlight" content="no">
    <script src="js/rem.js"></script>

    <link rel="stylesheet" href="css/base.css">
    <link rel="stylesheet" href="css/index.css">


    <title>肠胃互动</title>
</head>

<body>
    <section id='index'>
        <div class="scroll-box position">
            <!-- 固定背景 -->
            <img src="images/668-652.png" class="top-fixed" alt="">
            <img src="images/750-583.png" class="bottom-fixed" alt="">
            <!-- 内容 -->
            <div class="content">

                <!-- 顶部 -->
                <div class="top">
                    <img src="images/247-40.png" class="logo" alt="">
                    <img src="images/665-782.png" class="bg" alt="">
                    <img src="images/574-139.png" class="title" alt="">
                </div>
                <p class="more-text">下滑开始胃镜历险</p>
                <!-- 人物 -->
                <div class="people">
                    <img src="images/750-1133.png" id='people' class="people-1" alt="">
                    <div class="scroll-box2">
                        <div style="width: 100%;height: 1000rem;"></div>
                    </div>
                </div>

            </div>
        </div>
    </section>

    <section id="page2">
        <img src="images/750-1334.png" id='big' alt="">
        <div class="content">
            <div class="cos" id='two'></div>
        </div>
    </section>
    <section id='page3'>
        <img src="images/668-652.png" class="top-fixed" alt="">
        <img src="images/750-583.png" class="bottom-fixed" alt="">

        <img src="images/171-816.png" class="guan" style="z-index: 10;" alt="">
        <img src="images/5712-8780.png" class="wei" alt="">
        <div class="content" >
            <div class="cos" id='three'></div>
        </div>
    </section>
   

</body>
<script src="js/jquery.js"></script>
<script src='js/iscroll.js'></script>
<script>

    function throttle(func, wait) {
        let timeout;
        return function () {
            if (!timeout) {
                timeout = setTimeout(() => {
                    timeout = null;
                    func.call(this, arguments)
                }, wait)
            }
        }
    }

    var  winTop=document.body.offsetHeight;
    $("#two").css('height',winTop+30+'px')
    $("#three").css('height',winTop+30+'px')
    function son() {
       
        var topScroll = $('#index .scroll-box').scrollTop();
        var top = $(".content").height()
        var win = $(window).height()
        console.log(winTop + topScroll )
        console.log(top)
        if (winTop + topScroll >= top-10) {
           $(".people").addClass('fadeIn')
           let firstPic=setTimeout(function(e){
          
            $("#index").css('opacity','0')
            $("#page2").css('z-index', '1')
            $("#page2").css('opacity','1')


           clearTimeout(firstPic)
           },1700)
        } 
    }

   

    

function page2(){
    let topScroll = $('#page2 .content').scrollTop();
    let top = $("#two").height()
    let win = $(window).height()

    if (winTop + topScroll  >= top-10) {
         $("#big").addClass("fadeIn2")
         let pageTime=setTimeout(()=>{
            pageTime=null;
           $("#page2").css('z-index', '-1')
            $("#page2").css('opacity','0')
            $("#page3").css('z-index', '1')
            $("#page3").css('opacity','1')
         },1600)
     } 
}

function page3(){
    let topScroll = $('#page3 .content').scrollTop();
    let top = $("#three").height()
    let win = $(window).height()

    if (winTop + topScroll  >= top-10) {
       

        //   $(".wei").css("transform",'scale(1)')
        $(".wei").addClass("fadeIn3")
        
          setTimeout(()=>{
            
              $('.guan').addClass("fadeIn4")
            
          },300)
        //  let pageTime=setTimeout(()=>{
        //     pageTime=null;
        //    $("#page2").css('z-index', '-1')
        //     $("#page2").css('opacity','0')
        //     $("#page3").css('z-index', '1')
        //     $("#page3").css('opacity','1')
        //  },1600)
     } 
}

$('#index .scroll-box').scroll(throttle(son, 10));

$("#page2 .content").scroll(throttle(page2,1000))

$("#page3 .content").scroll(throttle(page3,1000))


 






</script>

</html>