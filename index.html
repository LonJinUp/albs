<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport"
        content="width=device-width,initial-scale=1,maximum-scale=1,minimum-scale=1,user-scalable=no" />
    <!-- 是否启动webapp功能，会删除默认的苹果工具栏和菜单栏。 -->
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <!-- 这个主要是根据实际的页面设计的主体色为搭配来进行设置。 -->
    <meta name="apple-mobile-web-app-status-bar-style" content="black" />
    <!-- 忽略页面中的数字识别为电话号码,email识别 -->
    <meta name="format-detection" content="telephone=no, email=no" />
    <!-- 启用360浏览器的极速模式(webkit) -->
    <meta name="renderer" content="webkit">
    <!-- 避免IE使用兼容模式 -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <!-- 针对手持设备优化，主要是针对一些老的不识别viewport的浏览器，比如黑莓 -->
    <meta name="HandheldFriendly" content="true">
    <!-- 微软的老式浏览器 -->
    <meta name="MobileOptimized" content="320">
    <!-- uc强制竖屏 -->
    <meta name="screen-orientation" content="portrait">
    <!-- QQ强制竖屏 -->
    <meta name="x5-orientation" content="portrait">
    <!-- UC强制全屏 -->
    <meta name="full-screen" content="yes">
    <!-- QQ强制全屏 -->
    <meta name="x5-fullscreen" content="true">
    <!-- UC应用模式 -->
    <meta name="browsermode" content="application">
    <!-- QQ应用模式 -->
    <meta name="x5-page-mode" content="app">
    <!-- windows phone 点击无高光 -->
    <meta name="msapplication-tap-highlight" content="no">
    <script src="js/rem.js"></script>

    <link rel="stylesheet" href="css/base.css">
    <link rel="stylesheet" href="css/index.css">


    <title>肠胃互动</title>
</head>

<body>
    <section id='index'>
        <div class="scroll-box position">
            <!-- 固定背景 -->
            <img src="images/668-652.png" class="top-fixed" alt="">
            <img src="images/750-583.png" class="bottom-fixed" alt="">
            <!-- 内容 -->
            <div class="content">

                <!-- 顶部 -->
                <div class="top">
                    <img src="images/247-40.png" class="logo" alt="">
                    <img src="images/665-782.png" class="bg" alt="">
                    <img src="images/574-139.png" class="title" alt="">
                </div>
                <p class="more-text">下滑开始胃镜历险</p>
                <!-- 人物 -->
                <div class="people">
                    <img src="images/750-1133.png" id='people' class="people-1" alt="">
                    <div class="scroll-box2">
                        <div style="width: 100%;height: 1000rem;"></div>
                    </div>
                </div>

            </div>
        </div>
    </section>

    <section id="page2">
        <img src="images/750-1334.png" alt="">
        <div class="content">
            <div class="cos"></div>
        </div>
    </section>
</body>
<script src="js/jquery.js"></script>
<script src='js/iscroll.js'></script>
<script>

    function throttle(func, wait) {
        let timeout;
        return function () {
            if (!timeout) {
                timeout = setTimeout(() => {
                    timeout = null;
                    func.call(this, arguments)
                }, wait)
            }
        }
    }

    function son() {
        // console.log($('#index').scrollTop())


        var topScroll = $('#index .scroll-box').scrollTop();
        var top = $(".content").height()
        var win = $(window).height()


        if (win + topScroll >= top) {
            $(".scroll-box2").show()
            $(".scroll-box").css("position", 'fixed')
            $(".scroll-box").css("bottom", '0px')
        } else {
            // $(".scroll-box2").hide()
        }
    }


    $('#index .scroll-box').scroll(throttle(son, 10));
    var n = 1;
    var x = 1;
    var tops = 0;
    function childs() {
        var topScroll = $('#index .scroll-box2').scrollTop();
        console.log(tops)
        console.log(topScroll)
        if (tops > 0) {

            if (tops < topScroll) {
                console.log('加')
                var num = n += 0.01;
                var left = x += 0.2
                let a = 'scale(' + num + ') translate(' + -left + 'px,0)'

                if (num >= 2.6) {
                    // $("#index").fadeOut(600);
                    $("#index").animate({
                        opacity: '0',
                    });
                      $("#page2").css('z-index', '1')
                    $("#page2").css('opacity','1')
                    
                    // $("#page2").animate({

                    //     opacity: '1',

                    // });
                }
                $("#people").css('transform', a)
                tops = topScroll

            } else {
                console.log('jian')

                if (topScroll > 3) {
                    var num = n -= 0.01;
                    var left = x -= 0.2;


                    let a = 'scale(' + num + ') translate(' + -left + 'px,0)'


                    $("#people").css('transform', a)
                } else {


                    var num = 1
                    var left = 0


                    let a = 'scale(' + num + ') translate(' + -left + 'px,0)'
                    $("#people").css('transform', a)

                    $(".scroll-box2").hide()
                }



                tops = topScroll


            }

        } else {
            tops = topScroll
        }






    }

    $("#index .scroll-box2").scroll(throttle(childs, 30))






</script>

</html>